 /*
 This Python Script is developed using Python 3. It should run well in Python 2 if we remove the "print()" statements or replace "print()" with print "" */

This script contains 3 files.

1. ace2f5parser.py - Main file parsing the ACE configs
2. create_f5_configs.py - Reads data generated by ace2f5parser.py and writes F5 LTM configs to F5Configs Directory.
3. parser_functions.py - some function calls

I have developed this script specifically for migration for ACE configs to equivalent F5 LTM configs. This helped me a lot and saved my time during migration of around 900 vips and their related configuration.

I am not hundred percent sure if it works for your's ACE configs, as this has been tailored by reading the configs that had in our environment.

You can modify the script as per your need, use it and you are absolutely free to do so.
===================================
How this script works
===================================

a) Save the ACE configs in a file. Example "all_ace_configs.txt"
b) Create a text file with the name of the VIPS that you want to generate equivalent config. For example you want to generate configs for 50 VIPS out of 700 VIPS.
so the text file should contain the exact name of 50 VIPS. File "first_batch_vips.txt" So the contents of the file would be.

vip1_a <br/>
vip2_a <br/>
vip3_a <br/>  
(Please provide the appropriate names separated by newline)

(I used Cisco ANM to dump the VIP names in xls sheet and copy that to a text file.)

c) You need to have F5Configs folder on the location where you are running the script. You are free to change the location modifying the "create_f5_configs.py"
script.

d) Now run the script as:

python create_f5_configs.py \<allaceconfigsfile\> \<vipstobemigratedfile\>

example:
<b> \>\>\> python create_f5_configs.py all_ace_configs.txt first_batch_vips.txt </b>

e) To comply with virtual server name match with the DNS names. The script will do DNS lookup of the VIRTUAL IP. If it gets Domain Name, It will use the first part separated by dots. So, if domain name is "zzz.example.com". The virtual server name will start with "zzz".

If it's http virtual server then, full virtual server name will be.

zzz-http-vs

If unable to get the domain name will use the existing VIP name in the ACE config.


f) All F5 LTM configs are generated inside F5Configs folder.

- All node configs are written in a single file.
- Other objects are written per vip wise.

g) The configs are in bigip.conf style. So, I have found the following procedure best for me while importing the configs to F5 LTM.
 - First I verified the configs if it is generated as required. If needed made few modifications manually. As, this might not work 100%.
 
 Then: 
 1.	Create a Folder in /shared/tmp or /var/tmp on F5 LTM.
 2.	Upload the files to /share/tmp/<folder> or /var/tmp/<folder> directory on F5 LTM.
 3. First verify the files to check if the configuration is ok to merge and load.
     (tmsh)# load sys config file /var/tmp/<folder>/<configfile.txt> merge verify
 4.	If it comes clean without errors, merging the config will be:
     (tmsh)# load sys config file /var/tmp/samplefile.txt merge
 5.	Save the config:
     (tmsh)# save sys config
 6.	Sync the config
 
 Few things to consider:
 
 I have used 
 a) Snatpool and it uses the vip IP. If you want to use any other IPs or automap, please change the script or modify F5 Config files  generated.
 
 b) The VIP is enabled on certain VLAN. Please check create_f5_configs.py and point it to appropriate vlan. enabled_vlan = "VlanXXX". Currently this script allows only one Vlan. If you want to remove this you are free to modify the script or delete it from F5 Configs file that gets generated.
 
 
/*
Please use at your own risk. This script has saved my time and hope it would be helpful for you.
 */
